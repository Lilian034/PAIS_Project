<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>政務分身管理系統</title>
    <link rel="stylesheet" href="admin.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-brand">
            <div class="nav-avatar">管</div>
            <div class="nav-title">
                <h1>政務分身管理系統</h1>
                <p>Political AI Management System</p>
            </div>
        </div>
        <div class="nav-user">
            <span class="user-name">王市長</span>
            <button class="logout-btn">登出</button>
        </div>
    </nav>

    <div class="container">
        <aside class="sidebar">
            <ul class="nav-menu">
                <li class="nav-item active" data-tab="documents"><span class="nav-icon"></span><span>政務文檔管理</span></li>
                <li class="nav-item" data-tab="proofread"><span class="nav-icon"></span><span>資料校稿</span></li>
                <li class="nav-item" data-tab="content-gen"><span class="nav-icon"></span><span>文宣生成</span></li>
                <li class="nav-item" data-tab="voice"><span class="nav-icon"></span><span>語音生成</span></li>
                <li class="nav-item" data-tab="media"><span class="nav-icon"></span><span>短影音生成</span></li>
                <li class="nav-item" data-tab="exposure"><span class="nav-icon"></span><span>數據監控</span></li>
            </ul>
        </aside>

        <main class="main-content">
            <!-- 政務文檔管理 -->
            <section id="documents" class="tab-content active">
                <div class="content-header">
                    <h2>政務文檔管理</h2>
                    <p>上傳政務相關文件到知識庫,供 AI 學習與回答使用</p>
                </div>

                <div class="docs-toolbar">
                    <div class="docs-search">
                        <span class="icon">🔎</span>
                        <input type="text" class="search-input" placeholder="搜尋檔名、關鍵字…">
                    </div>
                    <div class="docs-actions">
                        <select class="select">
                            <option value="newest">依上傳時間(新→舊)</option>
                            <option value="oldest">依上傳時間(舊→新)</option>
                        </select>
                        <button class="btn btn-primary btn-sm">套用</button>
                    </div>
                </div>

                <div class="docs-grid">
                    <div class="card upload-card">
                        <div class="upload-box upload-compact">
                            <div class="upload-icon">📁</div>
                            <h3>上傳文檔</h3>
                            <p>支援 PDF、Word 格式</p>
                            <input type="file" id="documentUpload" accept=".pdf,.doc,.docx,.xls,.xlsx" multiple class="hidden">
                            <button class="upload-btn" onclick="document.getElementById('documentUpload').click()">選擇文件</button>
                        </div>
                    </div>

                    <div class="card list-card">
                        <div class="documents-list">
                            <div class="list-header list-header--3">
                                <span>檔案名稱</span>
                                <span>上傳時間</span>
                                <span>操作</span>
                            </div>

                            <div class="document-item document-item--3">
                                <span class="file-name">教育政策白皮書.pdf</span>
                                <span>2024-01-15 10:30</span>
                                <div class="actions">
                                    <button class="btn-small danger" onclick="deleteDocument(this)">刪除</button>
                                    <button class="btn-small" onclick="window.open('./files/教育政策白皮書.pdf','_blank')">查看檔案</button>
                                </div>
                            </div>

                            <div class="document-item document-item--3">
                                <span class="file-name">市政規劃報告.docx</span>
                                <span>2024-01-14 15:45</span>
                                <div class="actions">
                                    <button class="btn-small danger" onclick="deleteDocument(this)">刪除</button>
                                    <button class="btn-small" onclick="window.open('./files/市政規劃報告.docx','_blank')">查看檔案</button>
                                </div>
                            </div>

                            <div class="empty-state hidden">
                                <div class="empty-illustration">📂</div>
                                <p>尚未有任何上傳的文檔</p>
                                <small>從左側「上傳文檔」選取檔案,或拖曳檔案至此頁上傳</small>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 資料校稿 -->
            <section id="proofread" class="tab-content">
                <div class="content-header">
                    <h2>資料校稿</h2>
                    <p>貼上段落或輸入內容,助理會協助校對、潤筆與比對知識庫</p>
                </div>

                <div class="pr-chat-panel">
                    <div class="pr-chat-header">
                        <div class="pr-chat-title">
                            <div class="pr-ai-avatar">
                                <img src="./proofreading.png" alt="校稿助理" onerror="this.style.display='none';this.closest('.pr-ai-avatar').classList.add('fallback');">
                                <span class="fallback-text">校</span>
                            </div>
                            <div>
                                <h3>校稿助理</h3>
                                <small>針對內容做語氣、專有用詞、事實校對</small>
                            </div>
                        </div>
                    </div>

                    <div class="pr-chat-messages" id="pr-chatMessages">
                        <div class="pr-message pr-ai">
                            <div class="pr-avatar pr-ai-avatar">
                                <img src="./proofreading.png" alt="校稿助理" onerror="this.style.display='none';this.closest('.pr-ai-avatar').classList.add('fallback');">
                                <span class="fallback-text">校</span>
                            </div>
                            <div class="pr-bubble">您好～我在這裡幫你校正文稿、逐字稿。請直接貼上文字。</div>
                        </div>
                    </div>

                    <div class="pr-chat-input">
                        <textarea id="pr-messageInput" placeholder="輸入文稿內容(Enter 送出,Shift+Enter 換行)"></textarea>
                        <button class="pr-send-btn" id="pr-sendBtn" aria-label="送出">送出</button>
                    </div>
                </div>
            </section>

            <!-- 文宣生成 -->
            <section id="content-gen" class="tab-content">
                <div class="content-header">
                    <h2>文宣生成</h2>
                    <p>說明需求,快速製作宣傳素材文案</p>
                </div>
                <div class="content-gen-container">
                    <div class="gen-input-section">
                        <h3>生成需求</h3>
                        <div class="form-group">
                            <label>內容類型</label>
                            <select id="contentType" class="form-control">
                                <option value="press">新聞稿</option>
                                <option value="speech">演講稿</option>
                                <option value="facebook">Facebook 貼文</option>
                                <option value="instagram">Instagram 貼文</option>
                                <option value="poster">宣傳海報文案</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>生成指令</label>
                            <textarea id="genPrompt" class="form-control" rows="4" placeholder="例如:需要一篇臉書文案,宣傳市長去花蓮鏟土,邀請民眾一起盡一份心力"></textarea>
                        </div>
                        <button class="generate-btn" onclick="generateContent()">
                            <span>✨</span> 生成內容
                        </button>
                    </div>
                    <div class="gen-output-section">
                        <div class="card-title-row">
                            <h3>生成結果</h3>
                        </div>

                        <div id="generatedContent" class="generated-content">
                            <div class="placeholder-text">
                                <p>輸入生成指令後,AI將根據知識庫內容生成文宣</p>
                            </div>
                        </div>
                        
                        <div class="output-actions">
                            <button class="action-btn" onclick="copyDraft()">複製文搞</button>
                            <button class="action-save-btn" onclick="saveDraftTxt()">儲存檔案TXT</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 語音生成 -->
            <section id="voice" class="tab-content">
                <div class="content-header">
                    <h2>語音生成</h2>
                    <p>選擇與調整音色,並生成語音檔</p>
                </div>

                <div class="voice-section">
                    <div class="voice-selection">
                        <div class="voice-title">
                            <h3>音色選擇</h3>
                            <button type="button" id="btnVoiceUpload" class="btn-add-voice">＋ 新增音檔</button>
                        </div>
                        <div class="voice-list">
                            <div class="voice-grid">
                                <div class="voice-option active"><div class="voice-avatar"></div><h4>專業、嚴謹</h4><p>2022政見發表</p><button class="voice-test">試聽</button></div>
                                <div class="voice-option"><div class="voice-avatar"></div><h4>親和、溫暖</h4><p>慈善活動</p><button class="voice-test">試聽</button></div>
                                <div class="voice-option"><div class="voice-avatar"></div><h4>開心、熱情</h4><p>國慶活動</p><button class="voice-test">試聽</button></div>
                                <div class="voice-option"><div class="voice-avatar"></div><h4>難過、感傷</h4><p>花蓮救災</p><button class="voice-test">試聽</button></div>
                            </div>
                        </div>
                    </div>

                    <div class="voice-settings">
                        <h3>指定內容</h3>
                        <div class="form-group">
                            <textarea id="voicePrompt" class="form-control" rows="4" placeholder="輸入指定音檔內容"></textarea>
                            <div class="prompt-actions">
                                <button id="btnGoGenerate" class="btn-ghost"><span>✨</span>生成</button>
                                <button id="btnSaveAudio" class="btn-dark">儲存音檔</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 音檔管理:新增彈窗 -->
            <div id="audioAddModal" class="audio-modal hidden" aria-hidden="true">
                <div class="audio-modal__card" role="dialog" aria-modal="true" aria-labelledby="audioAddTitle">
                    <div class="audio-modal__head">
                        <h3 id="audioAddTitle">新增音檔</h3>                    
                        <button id="addBtnClose" class="btn-ghost" aria-label="關閉">✕</button>
                    </div>

                    <div class="form-row">
                        <label>檔案:</label>
                        <div>
                            <button id="addChooseBtn" type="button" class="file-choose">＋ 選擇檔案</button>
                            <input id="addAudioInput" type="file" accept="audio/*,video/mp4,video/quicktime,.mp3,.wav,.mp4,.mov,.m4a,.aac,.flac,.ogg" class="hidden">
                        </div>
                    </div>

                    <div class="form-row">
                        <label for="addEmotion">情緒:</label>
                        <input id="addEmotion" type="text" placeholder="例如:audio">
                    </div>
                    
                    <div class="form-row">
                        <label for="addSource">來源:</label>
                        <input id="addSource" type="text" placeholder="音檔提取自...">
                    </div>

                    <div class="audio-modal__actions">
                        <button id="addBtnCreate" class="btn-dark">新增</button>
                    </div>
                </div> 
            </div>

            <!-- 短影音生成 -->
            <section id="media" class="tab-content">
                <div class="content-header">
                    <h2>短影音生成</h2>
                    <p>管理影像與語音資源,並生成短影音素材</p>
                </div>

                <div class="media-grid">
                    <div class="media-card">
                        <h3>📸 影像素材</h3>
                        <div class="media-preview">
                            <div class="photo-grid">
                                <div class="add-photo" onclick="document.getElementById('photoUpload').click()">＋ 新增照片</div>
                            </div>
                        </div>
                        <input type="file" id="photoUpload" accept="image/*" multiple class="hidden">
                    </div>

                    <div class="media-card">
                        <h3>🖊 語音樣本</h3>
                        <div class="media-preview audio-single">
                            <button type="button" class="add-audio" onclick="document.getElementById('audioUpload').click()">＋ 新增音檔</button>
                            <input id="audioUpload" type="file" accept="audio/*,video/mp4,video/quicktime,.mp3,.wav,.mp4,.mov,.m4a,.aac,.flac,.ogg" class="hidden">
                        </div>
                    </div>

                    <div class="media-card">
                        <h3>🎬 短影音生成</h3>
                        <div class="media-preview">
                            <div class="avatar-preview">
                                <div class="generated-avatar"><div class="avatar-placeholder">影片預覽</div></div>
                            </div>
                        </div>
                        <div class="media-actions">
                            <button id="btnGenVideo" class="btn-ghost"><span>✨</span>生成</button>
                            <button id="btnSaveVideo" class="btn-dark">儲存影片</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 數據監控 -->
            <section id="exposure" class="tab-content">
                <div class="content-header">
                    <h2>數據監控</h2>
                    <p>追蹤各平台觸及、互動與連結成效</p>
                </div>

                <div class="exposure-summary">
                    <div class="exposure-card"><div class="exposure-icon">👁️</div><div class="exposure-data"><h3>125,678</h3><p>總瀏覽數</p></div><div class="exposure-trend">+15.3%</div></div>
                    <div class="exposure-card"><div class="exposure-icon">🌐</div><div class="exposure-data"><h3>12</h3><p>活躍網址</p></div></div>
                    <div class="exposure-card"><div class="exposure-icon">📱</div><div class="exposure-data"><h3>8,456</h3><p>今日瀏覽</p></div><div class="exposure-trend">+8.2%</div></div>
                </div>

                <div class="url-manager">
                    <div class="url-header">
                        <h3>網址管理</h3>
                        <button class="add-url-btn" onclick="showAddUrlModal()">+ 新增網址</button>
                    </div>
                    <div class="url-list">
                        <div class="url-item">
                            <div class="url-info">
                                <span class="url-icon">🌐</span>
                                <div class="url-details">
                                    <h4>桃園市政宣傳網</h4>
                                    <a href="https://www.tyco.gov.tw/cp.aspx?n=14862" class="url-link" target="_blank" rel="noopener">https://www.tyco.gov.tw/cp.aspx?n=14862</a>
                                </div>
                            </div>
                            <div class="url-stats">
                                <span class="stat-label">瀏覽人數: 1122</span>
                            </div>
                            <div class="url-actions">
                                <button class="btn-icon danger" title="刪除">刪除</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script src="admin.js"></script>
</body>
</html>